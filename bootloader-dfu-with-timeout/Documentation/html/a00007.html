<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>LUFA Library - DFU Class Bootloader: BootloaderDFU.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LUFA Library - DFU Class Bootloader
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00007.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">BootloaderDFU.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &lt;avr/wdt.h&gt;</code><br/>
<code>#include &lt;avr/boot.h&gt;</code><br/>
<code>#include &lt;avr/pgmspace.h&gt;</code><br/>
<code>#include &lt;avr/eeprom.h&gt;</code><br/>
<code>#include &lt;avr/power.h&gt;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &lt;util/delay.h&gt;</code><br/>
<code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="a00012.html">Descriptors.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00005.html">BootloaderAPI.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00009.html">Config/AppConfig.h</a>&quot;</code><br/>
<code>#include &lt;LUFA/Drivers/USB/USB.h&gt;</code><br/>
<code>#include &lt;LUFA/Drivers/Board/LEDs.h&gt;</code><br/>
<code>#include &lt;LUFA/Platform/Platform.h&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html">DFU_Command_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a43fe878374e9bd27973d6f9c7818fe0b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a43fe878374e9bd27973d6f9c7818fe0b">BOOTLOADER_VERSION_MINOR</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a43fe878374e9bd27973d6f9c7818fe0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94588a4193cdc22aaabb63ee90122fbd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a94588a4193cdc22aaabb63ee90122fbd">BOOTLOADER_VERSION_REV</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a94588a4193cdc22aaabb63ee90122fbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77b3cb845202cca18b5ed20ff89b4a7e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a77b3cb845202cca18b5ed20ff89b4a7e">MAGIC_BOOT_KEY</a>&#160;&#160;&#160;0xDC42</td></tr>
<tr class="separator:a77b3cb845202cca18b5ed20ff89b4a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c740e2a3cccdd038fdfa35c0f175ec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#aa8c740e2a3cccdd038fdfa35c0f175ec">BOOTLOADER_VERSION</a>&#160;&#160;&#160;((<a class="el" href="a00007.html#a43fe878374e9bd27973d6f9c7818fe0b">BOOTLOADER_VERSION_MINOR</a> &lt;&lt; 4) | <a class="el" href="a00007.html#a94588a4193cdc22aaabb63ee90122fbd">BOOTLOADER_VERSION_REV</a>)</td></tr>
<tr class="separator:aa8c740e2a3cccdd038fdfa35c0f175ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6787d0668bee33167b6a8b819b2731"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a0d6787d0668bee33167b6a8b819b2731">BOOTLOADER_ID_BYTE1</a>&#160;&#160;&#160;0xDC</td></tr>
<tr class="separator:a0d6787d0668bee33167b6a8b819b2731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35898f06d7822e918a2e635b22a888b5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a35898f06d7822e918a2e635b22a888b5">BOOTLOADER_ID_BYTE2</a>&#160;&#160;&#160;0xFB</td></tr>
<tr class="separator:a35898f06d7822e918a2e635b22a888b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5504ac288483b1a23b3020b4806fecf7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a5504ac288483b1a23b3020b4806fecf7">IS_ONEBYTE_COMMAND</a>(dataarr, cb1)&#160;&#160;&#160;(dataarr[0] == (cb1))</td></tr>
<tr class="separator:a5504ac288483b1a23b3020b4806fecf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac54a066b0098b89c402ab3f902ea5876"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#ac54a066b0098b89c402ab3f902ea5876">IS_TWOBYTE_COMMAND</a>(dataarr, cb1, cb2)&#160;&#160;&#160;((dataarr[0] == (cb1)) &amp;&amp; (dataarr[1] == (cb2)))</td></tr>
<tr class="separator:ac54a066b0098b89c402ab3f902ea5876"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac164773c805185d46f4c670ae3b5c6ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#ac164773c805185d46f4c670ae3b5c6ce">DFU_FILE_SUFFIX_SIZE</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ac164773c805185d46f4c670ae3b5c6ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81b7a153e0de77f6449033d422f63ad2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a81b7a153e0de77f6449033d422f63ad2">DFU_FILLER_BYTES_SIZE</a>&#160;&#160;&#160;26</td></tr>
<tr class="separator:a81b7a153e0de77f6449033d422f63ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a528b1636296228d37880d91f69e1aa05"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a528b1636296228d37880d91f69e1aa05">DFU_REQ_DETATCH</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:a528b1636296228d37880d91f69e1aa05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c69a5d4bc3c21ff820174a6275d28e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a08c69a5d4bc3c21ff820174a6275d28e">DFU_REQ_DNLOAD</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a08c69a5d4bc3c21ff820174a6275d28e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bcf1a6cb958648a5d88ab65dc0806d0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a6bcf1a6cb958648a5d88ab65dc0806d0">DFU_REQ_UPLOAD</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:a6bcf1a6cb958648a5d88ab65dc0806d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa7b2cb45111d27bbe1ec70baa2fd1bc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#aaa7b2cb45111d27bbe1ec70baa2fd1bc">DFU_REQ_GETSTATUS</a>&#160;&#160;&#160;0x03</td></tr>
<tr class="separator:aaa7b2cb45111d27bbe1ec70baa2fd1bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a336d193607ee7451b119226ce2556546"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a336d193607ee7451b119226ce2556546">DFU_REQ_CLRSTATUS</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:a336d193607ee7451b119226ce2556546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05175b8e894d6ed531a03475d59a6c39"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a05175b8e894d6ed531a03475d59a6c39">DFU_REQ_GETSTATE</a>&#160;&#160;&#160;0x05</td></tr>
<tr class="separator:a05175b8e894d6ed531a03475d59a6c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9593293d011f7304cfc71bfb894e7a02"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a9593293d011f7304cfc71bfb894e7a02">DFU_REQ_ABORT</a>&#160;&#160;&#160;0x06</td></tr>
<tr class="separator:a9593293d011f7304cfc71bfb894e7a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ba05096192f890a1f12e7e9073c85ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a7ba05096192f890a1f12e7e9073c85ac">COMMAND_PROG_START</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a7ba05096192f890a1f12e7e9073c85ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab46cfbae53975f92417a95bb5e8aef95"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#ab46cfbae53975f92417a95bb5e8aef95">COMMAND_DISP_DATA</a>&#160;&#160;&#160;0x03</td></tr>
<tr class="separator:ab46cfbae53975f92417a95bb5e8aef95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada3a649c24e5f0455776082e7d68fae9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#ada3a649c24e5f0455776082e7d68fae9">COMMAND_WRITE</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:ada3a649c24e5f0455776082e7d68fae9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd932c054586f833bc575a4e1770cdcc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#acd932c054586f833bc575a4e1770cdcc">COMMAND_READ</a>&#160;&#160;&#160;0x05</td></tr>
<tr class="separator:acd932c054586f833bc575a4e1770cdcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a088bd63270795285c6f7322ccac2c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a2a088bd63270795285c6f7322ccac2c1">COMMAND_CHANGE_BASE_ADDR</a>&#160;&#160;&#160;0x06</td></tr>
<tr class="separator:a2a088bd63270795285c6f7322ccac2c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af456875920c8c853098d9c2f247c32af"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#af456875920c8c853098d9c2f247c32af">AppPtr_t</a> )(void) ATTR_NO_RETURN</td></tr>
<tr class="separator:af456875920c8c853098d9c2f247c32af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a97def58441af684d35dc81a34e0c1ace"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1ace">DFU_State_t</a> { <br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1aceaadb4993cd9183666f3ef9fd82a4519fa">appIDLE</a> = 0, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1acea71f82402de0db9a8f3263f045f87bcc1">appDETACH</a> = 1, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1acea64a13d4b1b2cc0b0a40069d8c28fe74c">dfuIDLE</a> = 2, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1acead5eb9bbb1f4eb27a0ac7e60c0bf5341f">dfuDNLOAD_SYNC</a> = 3, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1aceafd398c862995dfe599a9f182fa1e902e">dfuDNBUSY</a> = 4, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1acea68f32e308ff090838040f69ddcab8fff">dfuDNLOAD_IDLE</a> = 5, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1acea002e3cc408cf56d51c6cd2b0d90f1b7c">dfuMANIFEST_SYNC</a> = 6, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1aceaaffa9156a82ef21608e730325d8bb2c6">dfuMANIFEST</a> = 7, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1aceac48fe519296cbc202bbaf4969ecb44fb">dfuMANIFEST_WAIT_RESET</a> = 8, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1acea541f6e1c465d547c1265ba6bde6c59c2">dfuUPLOAD_IDLE</a> = 9, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1acea15ff004b2336c3e5b88e3edd276b32fd">dfuERROR</a> = 10
<br/>
 }</td></tr>
<tr class="separator:a97def58441af684d35dc81a34e0c1ace"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4489e781155c461e0e31910418244f27"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27">DFU_Status_t</a> { <br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a2bc49ec37d6a5715dd23e85f1ff5bb59">OK</a> = 0, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a4f6d9b9397bdaf8c52b1a3b21814795d">errTARGET</a> = 1, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a56c7583a5956d85dc99cf250f8c7771e">errFILE</a> = 2, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a62181eec68b16d43c1aee03174f9bba1">errWRITE</a> = 3, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a5816bb25bcc32867630963dba649cc54">errERASE</a> = 4, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a65c1f54049798ea81c7d1719f166a1be">errCHECK_ERASED</a> = 5, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27aacb4bde78f2c57c18dc2dc3d5249f2c8">errPROG</a> = 6, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a251a276fd7bfe2744888dc97fe956aff">errVERIFY</a> = 7, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a7465c34dd18ad03c8cbe13e3d395c902">errADDRESS</a> = 8, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27af30286bf44938bdea942a7f3c513d998">errNOTDONE</a> = 9, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a770d6396237b7deac15001165ef9c9bb">errFIRMWARE</a> = 10, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a08770dc5628ca360ef8a5ecfdf3d2210">errVENDOR</a> = 11, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27aacce9d3875703bdba61ade57ebd12de6">errUSBR</a> = 12, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a992b1de144265596023b92aa21094ecb">errPOR</a> = 13, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27aa69cd762eb2bcefece21d4601c51f471">errUNKNOWN</a> = 14, 
<br/>
&#160;&#160;<a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27a0123f1a634c8d384393557aedecb0788">errSTALLEDPKT</a> = 15
<br/>
 }</td></tr>
<tr class="separator:a4489e781155c461e0e31910418244f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0b2455ced7174a736a4c4ef730fa078e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a0b2455ced7174a736a4c4ef730fa078e">SetupHardware</a> (void)</td></tr>
<tr class="separator:a0b2455ced7174a736a4c4ef730fa078e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ff4dd9ef18deaf99078a09fbd6b1192"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a8ff4dd9ef18deaf99078a09fbd6b1192">ResetHardware</a> (void)</td></tr>
<tr class="separator:a8ff4dd9ef18deaf99078a09fbd6b1192"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f4ce439a74a152e3c8ffda5c7dd201a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a3f4ce439a74a152e3c8ffda5c7dd201a">EVENT_USB_Device_ControlRequest</a> (void)</td></tr>
<tr class="separator:a3f4ce439a74a152e3c8ffda5c7dd201a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80a42663b3ed5b860d2ed151636debcc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00007.html#a80a42663b3ed5b860d2ed151636debcc">Application_Jump_Check</a> (void) ATTR_INIT_SECTION(3)</td></tr>
<tr class="separator:a80a42663b3ed5b860d2ed151636debcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for <a class="el" href="a00006.html">BootloaderDFU.c</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a0d6787d0668bee33167b6a8b819b2731"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOTLOADER_ID_BYTE1&#160;&#160;&#160;0xDC</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>First byte of the bootloader identification bytes, used to identify a device's bootloader. </p>

</div>
</div>
<a class="anchor" id="a35898f06d7822e918a2e635b22a888b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOTLOADER_ID_BYTE2&#160;&#160;&#160;0xFB</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Second byte of the bootloader identification bytes, used to identify a device's bootloader. </p>

</div>
</div>
<a class="anchor" id="aa8c740e2a3cccdd038fdfa35c0f175ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOTLOADER_VERSION&#160;&#160;&#160;((<a class="el" href="a00007.html#a43fe878374e9bd27973d6f9c7818fe0b">BOOTLOADER_VERSION_MINOR</a> &lt;&lt; 4) | <a class="el" href="a00007.html#a94588a4193cdc22aaabb63ee90122fbd">BOOTLOADER_VERSION_REV</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Complete bootloader version number expressed as a packed byte, constructed from the two individual bootloader version macros. </p>

</div>
</div>
<a class="anchor" id="a43fe878374e9bd27973d6f9c7818fe0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOTLOADER_VERSION_MINOR&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Major bootloader version number. </p>

</div>
</div>
<a class="anchor" id="a94588a4193cdc22aaabb63ee90122fbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOTLOADER_VERSION_REV&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minor bootloader version number. </p>

</div>
</div>
<a class="anchor" id="a2a088bd63270795285c6f7322ccac2c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_CHANGE_BASE_ADDR&#160;&#160;&#160;0x06</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU command to issue a memory base address change command, to set the current 64KB flash page that subsequent flash operations should use. </p>

</div>
</div>
<a class="anchor" id="ab46cfbae53975f92417a95bb5e8aef95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_DISP_DATA&#160;&#160;&#160;0x03</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU command to begin reading the device's memory. </p>

</div>
</div>
<a class="anchor" id="a7ba05096192f890a1f12e7e9073c85ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_PROG_START&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU command to begin programming the device's memory. </p>

</div>
</div>
<a class="anchor" id="acd932c054586f833bc575a4e1770cdcc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_READ&#160;&#160;&#160;0x05</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU command to issue a read command. </p>

</div>
</div>
<a class="anchor" id="ada3a649c24e5f0455776082e7d68fae9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_WRITE&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU command to issue a write command. </p>

</div>
</div>
<a class="anchor" id="ac164773c805185d46f4c670ae3b5c6ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFU_FILE_SUFFIX_SIZE&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Length of the DFU file suffix block, appended to the end of each complete memory write command. The DFU file suffix is currently unused (but is designed to give extra file information, such as a CRC of the complete firmware for error checking) and so is discarded. </p>

</div>
</div>
<a class="anchor" id="a81b7a153e0de77f6449033d422f63ad2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFU_FILLER_BYTES_SIZE&#160;&#160;&#160;26</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Length of the DFU file filler block, appended to the start of each complete memory write command. Filler bytes are added to the start of each complete memory write command, and must be discarded. </p>

</div>
</div>
<a class="anchor" id="a9593293d011f7304cfc71bfb894e7a02"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFU_REQ_ABORT&#160;&#160;&#160;0x06</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU class command request to abort the current multi-request transfer and return to the dfuIDLE state. </p>

</div>
</div>
<a class="anchor" id="a336d193607ee7451b119226ce2556546"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFU_REQ_CLRSTATUS&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU class command request to reset the current DFU status and state variables to their defaults. </p>

</div>
</div>
<a class="anchor" id="a528b1636296228d37880d91f69e1aa05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFU_REQ_DETATCH&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU class command request to detach from the host. </p>

</div>
</div>
<a class="anchor" id="a08c69a5d4bc3c21ff820174a6275d28e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFU_REQ_DNLOAD&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU class command request to send data from the host to the bootloader. </p>

</div>
</div>
<a class="anchor" id="a05175b8e894d6ed531a03475d59a6c39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFU_REQ_GETSTATE&#160;&#160;&#160;0x05</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU class command request to get the current DFU state of the bootloader. </p>

</div>
</div>
<a class="anchor" id="aaa7b2cb45111d27bbe1ec70baa2fd1bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFU_REQ_GETSTATUS&#160;&#160;&#160;0x03</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU class command request to get the current DFU status and state from the bootloader. </p>

</div>
</div>
<a class="anchor" id="a6bcf1a6cb958648a5d88ab65dc0806d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFU_REQ_UPLOAD&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU class command request to send data from the bootloader to the host. </p>

</div>
</div>
<a class="anchor" id="a5504ac288483b1a23b3020b4806fecf7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_ONEBYTE_COMMAND</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dataarr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cb1&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(dataarr[0] == (cb1))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convenience macro, used to determine if the issued command is the given one-byte long command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dataarr</td><td>Command byte array to check against </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb1</td><td>First command byte to check </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac54a066b0098b89c402ab3f902ea5876"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_TWOBYTE_COMMAND</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dataarr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cb1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cb2&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((dataarr[0] == (cb1)) &amp;&amp; (dataarr[1] == (cb2)))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convenience macro, used to determine if the issued command is the given two-byte long command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dataarr</td><td>Command byte array to check against </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb1</td><td>First command byte to check </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb2</td><td>Second command byte to check </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a77b3cb845202cca18b5ed20ff89b4a7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAGIC_BOOT_KEY&#160;&#160;&#160;0xDC42</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Magic bootloader key to unlock forced application start mode. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="af456875920c8c853098d9c2f247c32af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* AppPtr_t)(void) ATTR_NO_RETURN</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Type define for a non-returning function pointer to the loaded application. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a97def58441af684d35dc81a34e0c1ace"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00007.html#a97def58441af684d35dc81a34e0c1ace">DFU_State_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU bootloader states. Refer to the DFU class specification for information on each state. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1aceaadb4993cd9183666f3ef9fd82a4519fa"></a>appIDLE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1acea71f82402de0db9a8f3263f045f87bcc1"></a>appDETACH</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1acea64a13d4b1b2cc0b0a40069d8c28fe74c"></a>dfuIDLE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1acead5eb9bbb1f4eb27a0ac7e60c0bf5341f"></a>dfuDNLOAD_SYNC</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1aceafd398c862995dfe599a9f182fa1e902e"></a>dfuDNBUSY</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1acea68f32e308ff090838040f69ddcab8fff"></a>dfuDNLOAD_IDLE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1acea002e3cc408cf56d51c6cd2b0d90f1b7c"></a>dfuMANIFEST_SYNC</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1aceaaffa9156a82ef21608e730325d8bb2c6"></a>dfuMANIFEST</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1aceac48fe519296cbc202bbaf4969ecb44fb"></a>dfuMANIFEST_WAIT_RESET</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1acea541f6e1c465d547c1265ba6bde6c59c2"></a>dfuUPLOAD_IDLE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a97def58441af684d35dc81a34e0c1acea15ff004b2336c3e5b88e3edd276b32fd"></a>dfuERROR</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a4489e781155c461e0e31910418244f27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00007.html#a4489e781155c461e0e31910418244f27">DFU_Status_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DFU command status error codes. Refer to the DFU class specification for information on each error code. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a2bc49ec37d6a5715dd23e85f1ff5bb59"></a>OK</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a4f6d9b9397bdaf8c52b1a3b21814795d"></a>errTARGET</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a56c7583a5956d85dc99cf250f8c7771e"></a>errFILE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a62181eec68b16d43c1aee03174f9bba1"></a>errWRITE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a5816bb25bcc32867630963dba649cc54"></a>errERASE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a65c1f54049798ea81c7d1719f166a1be"></a>errCHECK_ERASED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27aacb4bde78f2c57c18dc2dc3d5249f2c8"></a>errPROG</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a251a276fd7bfe2744888dc97fe956aff"></a>errVERIFY</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a7465c34dd18ad03c8cbe13e3d395c902"></a>errADDRESS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27af30286bf44938bdea942a7f3c513d998"></a>errNOTDONE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a770d6396237b7deac15001165ef9c9bb"></a>errFIRMWARE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a08770dc5628ca360ef8a5ecfdf3d2210"></a>errVENDOR</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27aacce9d3875703bdba61ade57ebd12de6"></a>errUSBR</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a992b1de144265596023b92aa21094ecb"></a>errPOR</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27aa69cd762eb2bcefece21d4601c51f471"></a>errUNKNOWN</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a4489e781155c461e0e31910418244f27a0123f1a634c8d384393557aedecb0788"></a>errSTALLEDPKT</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a80a42663b3ed5b860d2ed151636debcc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Application_Jump_Check </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Special startup routine to check if the bootloader was started via a watchdog reset, and if the magic application start key has been loaded into <a class="el" href="a00006.html#ad98754cd5b9bd2d564fd093c20b07e2d">MagicBootKey</a>. If the bootloader started via the watchdog and the key is valid, this will force the user application to start via a software jump. </p>

</div>
</div>
<a class="anchor" id="a3f4ce439a74a152e3c8ffda5c7dd201a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_ControlRequest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_ControlRequest event. This is used to catch and process control requests sent to the device from the USB host before passing along unhandled control requests to the library for processing internally. </p>

</div>
</div>
<a class="anchor" id="a8ff4dd9ef18deaf99078a09fbd6b1192"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ResetHardware </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0b2455ced7174a736a4c4ef730fa078e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void SetupHardware </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00007.html">BootloaderDFU.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
